<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

  <div class="container">
    <div class="centered-element">

      <h1 class="title">Retrait DAB</h1>
      <p class="setence">Cliquez sur le bouton pour faire un retrait</p>
      <button onclick="cardChecker()">retrait</button>
      <br>
      
      <div class = "app"></div>
    </div>
  </div>
  
  

    <script>

  // variables
  const soldeClient = 1200;
  const soldeDab = 1200;
  const passCard = 9513;
  
  const app = document.querySelector(".app") 
  
  // Functions
  /* Type de cartes de l'app:
  1. CB Valide 
  2. CB non Valide 
  3. CB bloquée
  */
 function cardChecker(){
    let card = parseInt(prompt('Choisissez une carte'));

    // if (typeof(card) !== "string" && (card <= 3 || card > 4)) {
      if (card === 2 || card != 1){
        if (card === 2) {
              app.innerText = "CB bloquée"
        } else { 
          app.innerText = "CB Non valide" 
        }
    } else {
        passChecker()
    };
  }

  /* pr vérification du code de la CB :
  - A l'aide d'1 boucle ns allons permettre 3 essais
  - Si un des 3 essais est valide, on met le cpte de la boucle
  - au max afin de l'arreter et on lance la fx pr choisir le montant à retirer

  */
  function passChecker() {
    app.innerText = "CB valide" 
    for (let index = 0; index < 3; index++) {  
      let passPrompt = parseInt(prompt('Saisissez votre code'))
      if (passPrompt === passCard) {
        index = 3 // détermine le nbre de boucle
        amountChoice()
      }
    }
    
  }

  function amountChoice(){
    app.innerText = "combien voulez-vous retirer ?";
    let amount = parseInt(prompt('Choisissez un montant : 20, 50, 100, 200, 500, 1000'))
    if (amount > soldeClient) {
      app.innerText = "Solde insuffisant"
    } else {
      if (amount > soldeDab) {
        app.innerText = "Retrait de " + amount + "Euros"
      }
    }

  1
  }



  // App
  cardChecker();
    </script>
</body>
</html>